# 「少女前线」跨服手册（散爆版）（iOS 端 → 应用宝服）
 > By: [Mornwind](https://github.com/Mornwind)
 > 
 > Blog: [Mornwind’s Blog](https://blog.mornwind.cc)（博客中也有教程，使用的是国内备用仓库）
 > 
 > GitHub Repo: [Mornwind/GFCN_SwitchServer](https://github.com/Mornwind/GFCN_SwitchServer) 
 > 
 > Gitee Repo: [Mornwind/GFCN_SwitchServer](https://gitee.com/Mornwind/GFCN_SwitchServer) (国内备用仓库，配置中链接已全部替换成 gitee.com，防止国内无法访问 GitHub)
 > 
 > QQ Group：
 > > 【霞之丘 · 少前跨服】:[`915089623`](https://jq.qq.com/?_wv=1027&k=5rnvPAT)（本群已于 2021/8/12 10:59 被封，损失惨重，故新群拆分成两个，分别运作）
 > > 
 > > 【霞之丘⟡少前跨服答疑】：[`907757876`](https://jq.qq.com/?_wv=1027&k=wdMRfleu)（仅跨服答疑，勿水无关话题）（请先填写[【少前跨服情况统计】](https://docs.qq.com/form/page/DREpKbGVaQWtRcGhI)收集表，便于管理员有针对性地答疑及后期通知）
 > > 
 > > 【霞之丘⟡闲聊群】：[`908042781`](https://jq.qq.com/?_wv=1027&k=Ph1teaIm)（仅闲聊，不答疑）

## 致谢

- **参考&协助**
  - 霞ヶ丘詩羽x / 浪速の白雪姬：[GitHub](https://gitee.com/KasumigaokaUtaha) / [Gitee](https://gitee.com/silvercrowsaki) / [Bilibili](https://space.bilibili.com/455501) / [NGA](https://bbs.nga.cn/thread.php?authorid=42650362)
    - B 站专栏：[少女前线 跨服 iOS安卓国服（cv3630717）](https://www.bilibili.com/read/cv3630717)
    - B 站专栏：[少前B服（散爆）iOS 跨服（cv3677605）](https://www.bilibili.com/read/cv3677605)（专栏文章已被 B 站删除）
  - LNarga / MoonNarga：[GitHub](https://github.com/MoonNarga)
    - GitHub：[Server_Switch_for_GirlsFrontline](https://github.com/MoonNarga/Server_Switch_for_GirlsFrontline)

---

## ⚠️ 注意事项 ⚠️

1. 本项目内所提到的所有客户端与服务器，均为**国服**。
2. 跨服脚本代码**公开透明**地存放于本项目中，欢迎随时进行检查。跨服脚本中**并未含有**用于修改游戏内数据以获得不正当收益的作弊内容，只是用来切换登录服务器。但从原则上来说还是属于违反用户协议的行为，会不会被封号要看官方的心情。如若不放心，还请另寻他法（但是跨服的原理都是一样的，要真查起来都跑不掉）。
3. **无法进行跨服充值，否则 1000% 会错充进客户端对应的原服务器，切记！**

---

## 📖 跨服手册 📖
 > 常见的游戏跨服方式分类，详见前言中的[附录3](/README.md#附录3ios-端常见跨服方式)。
 > 
 > 本手册仅详细介绍“**A-1 类型**”，即“通过**使用网络调试工具**，**在本地重写客户端请求**，**直接**实现跨服”。

| 图标 | 跨服工具 | 别名 | 跨服教程<br/>与配置 |
| :-: | :-: | :-: | :-: |
| ![](/Icon/HTTP_Catcher_Icon.png) | HTTP Catcher | 网球 | [文字教程](#-http-catcher) |
| ![](/Icon/Thor_Icon.png) | Thor | 锤子 | [文字教程](#-thor) |
| ![](/Icon/Shadowrocket_Icon.png) | Shadowrocket | 小火箭 | [文字教程](#-shadowrocket) |
| ![](/Icon/Quantumult_X_Icon.png) | Quantumult X | 圈叉 | [文字教程](#-quantumult-x) |
| ![](/Icon/Surge_4_Icon.png) | Surge 4 | - | [文字教程](#-surge-4) |
| ![](/Icon/Loon_Icon.png) | Loon | 气球 | [文字教程](#-loon) |

<details>
<summary>点击查看：常用网络调试工具对比</summary>

| 跨服工具 | 国区商店<br/>购买与下载 | 正规渠道价格 | 跨服操作<br/>方便程度 | 设备上同时<br/>挂梯与跨服 | 备注 |
| :-: | :-: | :-: | :-: | :-: | :-: |
| HTTP Catcher<br/>（网球） | ✅ | ¥28.00（内购）<br/>\$3.99（内购） | ★★★★ | ❌ |  |
| Thor<br/>（锤子） | ✅ | ¥88.00<br/>\$12.99 | ★★★★ | ❌ |  |
| Shadowrocket<br/>（小火箭） | ❌ | \$2.99 | ★★★★ | ✅ |  |
| Quantumult X<br/>（圈叉） | ❌ | \$7.99 | ★★ | ✅ | TF 名额已满 |
| Surge 4 | ❌ | \$49.99（首次内购）<br/>+ \$14.99/y（订阅） | ★★ | ✅ | 是真的贵 |
| Loon<br/>（气球） | ❌ | \$2.99 | ★★ | ✅ | Bug 较多 |

</details>

### ⑴ HTTP Catcher

<details>
<summary>点击查看：第一部分 获取账号登录信息</summary>

**⚠️注意事项⚠️**：只有**首次跨服**、**账号登录数据失效**两种情况下才需要完整执行一次第一部分的操作。**不需要每次跨服前都去执行一次！**

1. **【iOS】启用 Wi-Fi 访问**：进入“更多”→“Wi-Fi 访问”，打开“允许 Wi-Fi 访问”开关，并记住下方的“IP 地址”及“端口”；下滑返回“更多”界面。
2. **【iOS】禁用 HTTPS 解密**：在“更多”界面中，关闭“解密 HTTPS 流量”开关。
3. **【iOS】禁用仅记录消息头**：进入“更多”→“高级设置”，关闭“仅记录消息头”开关；然后回到“历史”界面。
4. **【iOS】启动 HTTP Catcher 进行数据抓取**：点击下方的开关按钮启动 HTTP Catcher，即可开始对相同 Wi-Fi 下的 Android 设备进行数据抓取。
5. **【Android】配置安卓设备的 Wi-Fi 代理（不同机型设置方法略有区别）**：**首先保证你的两个设备在同个 Wi-Fi 下**；然后在“系统设置”→“无线网络”中，找到当前连接的 Wi-Fi，点击进入详细设置，找到“代理设置”，将其改为“手动”，并在“服务器”和“端口”中依次填入第 1 步中记下的内容；点击“保存”返回。
6. **【Android】抓取账号登录数据**：在清除了游戏后台的情况下进入游戏，在游戏中完整进行一次 QQ 或微信账号的授权登录并看到自己的玩家等级后，即可退出游戏。
7. **还原第 1～5 步所做操作至修改前**：即：停止 HTTP Catcher；禁用“Wi-Fi 访问”；取消安卓设备的 Wi-Fi 代理；开启“仅记录消息头”；启用 HTTPS 解密（可留至第二部分配置中再操作）。
8. **【iOS】提取账号登录数据（重要！）**：在“历史”界面上方的搜索栏中输入“/third”，即可搜出一条显示为“/third/channelLogin”的记录，点击进入；在弹出的界面中，点击上方的“响应”选项卡，在下方“Preview”中即可找到“open_id”和“token”，将各自后面所跟双引号内的内容复制保存好（复制时不包括双引号本身），在后面的第二部分配置过程中需要用到。

</details>

<details>
<summary>点击查看：第二部分 配置跨服</summary>

1. **下载并导入跨服配置文件**：下载下面的“.hcc”类型的跨服配置文件，通过“共享”或“在其他应用中打开”调出系统分享菜单，然后选择“拷贝到‘HTTP Catcher’”；在 HTTP Catcher 中弹出的“导入”对话框中选择“好的”，即可成功导入。

```
https://github.com/Mornwind/GFCN_SwitchServer/raw/master/HTTP_Catcher/gfcn_ios2tx.hcc
```

2. **填入账号信息（重要！）**：进入“更多”→“重写”，在弹出的“重写列表”界面中，找到有“写入账号数据”的一条，点击右侧的ⓘ进入“编辑重写”界面；在“规则”中，先点进第一项（含“openid=”），进入“编辑规则”界面，找到最下方的“替换”部分，将已获取到账号数据中的“open_id”值替换掉其中的“abc”（千万不要删改其前后的“$1”及“&”；粘贴后如出现空格需删除），点击右上角的“存储”回到“编辑重写”界面；再点进第二项（含“sid=”），进入“编辑规则”界面，找到最下方的“替换”部分，将已获取到账号数据中的“token”值替换掉其中的“xyz”（千万不要删改其前后的“$1”及“&”；粘贴后如出现空格需删除），点击右上角的“存储”回到“编辑重写”界面；再点击右上角的“存储”回到“重写列表”界面。
3. **启用跨服配置**：在“重写列表”界面中，依次点击关于跨服的“切换服务器P1”、“切换服务器P2”、“写入账号数据”这三条跨服配置，使其前面全都出现“✓”。
4. **启用重写功能**：在“重写列表”界面中，打开上面的“重写列表”开关；然后回到“更多”界面。
5. **启用 HTTPS 解密功能**：在“更多”页面，打开最上面的“解密 HTTPS 流量”开关（旧版本中，此开关为“开启 HTTPS 抓包”）。
6. **安装 MitM 证书**：在上一步中弹出的“安装证书描述文件”对话框中选择“安装”，允许下载配置描述文件，前往系统的“设置”→“通用”→“描述文件与设备管理”中安装 MitM 所需证书。
7. **信任 MitM 证书**：在系统的“设置”→“通用”→“关于本机”→“证书信任设置”中信任该证书；然后回到 HTTP Catcher 的“更多”页面。
8. **启用仅记录消息头**：进入“高级设置”，打开“仅记录消息头”开关；然后回到“历史”界面。
9. **启动 HTTP Catcher**：点击下方的开关按钮，然后在清除了游戏后台的情况下进入游戏，即可完成跨服。（如无其他使用需求，成功跨服进入游戏后便可停止 HTTP Catcher。）

</details>

### ⑵ Thor

<details>
<summary>点击查看：第一部分 获取账号登录信息</summary>

**⚠️注意事项⚠️**：只有**首次跨服**、**账号登录数据失效**两种情况下才需要完整执行一次第一部分的操作。**不需要每次跨服前都去执行一次！**

1. **【iOS】设置抓取数据的过滤器**：在“过滤器”主界面中，点击闪电按钮上方显示的漏斗图标或过滤器名称，在弹出的“过滤器”列表中，找到“全局抓包”，点击选中并自动返回主界面。
2. **【iOS】禁用 HTTPS 解密**：在“更多”界面中，点击“HTTPS 解析设置”进入“HTTPS 证书管理”界面，将“CA 证书”中已启用的证书停用；然后返回主界面。
3. **【iOS】启用 Wi-Fi 监听**：在“过滤器”主界面中，点击闪电按钮启动 Thor；然后翻到界面最下方，先关闭“本机监听”的开关，再打开“Wi-Fi 监听”的开关，并记住“Wi-Fi 监听”下方的“服务器”及“端口”。
4. **【Android】配置安卓设备的 Wi-Fi 代理（不同机型设置方法略有区别）**：**首先保证你的两个设备在同个 Wi-Fi 下**；然后在“系统设置”→“无线网络”中，找到当前连接的 Wi-Fi，点击进入详细设置，找到“代理设置”，将其改为“手动”，并在“服务器”和“端口”中依次填入第 1 步中记下的内容；点击“保存”返回。
5. **【Android】抓取账号登录数据**：在清除了游戏后台的情况下进入游戏，在游戏中完整进行一次 QQ 或微信账号的授权登录并看到自己的玩家等级后，即可退出游戏。
6. **还原第 2～4 步所做操作至修改前**：即：停止 Thor（会自动重置“本机监听”与“Wi-Fi 监听”的开关为默认状态，无需手改）；取消安卓设备的 Wi-Fi 代理；启用 HTTPS 解密（可留至第二部分配置中再操作）。
7. **【iOS】提取账号登录数据（重要！）**：在“会话记录”界面中，点击进入找到刚才生成的“全局抓包”记录；在弹出的界面上方的“关键字”搜索栏中输入“/third”并点击“搜索”，即可搜出一条显示为“/third/channelLogin”的记录，点击进入；在弹出的界面中，点击上方的“响应”选项卡，再点击“消息体”部分中的“text/html”，在弹出的“消息体”内容界面中即可找到“open_id”和“token”，将各自后面所跟双引号内的内容复制保存好（复制时不包括双引号本身），在后面的第二部分配置过程中需要用到。

</details>

<details>
<summary>点击查看：第二部分 配置跨服</summary>

1. **下载并导入跨服配置文件**：下载下面的“.f4thor”类型的跨服配置（过滤器）文件，通过“共享”或“在其他应用中打开”调出系统分享菜单，然后选择“拷贝到‘Thor’”；在弹出的跨服配置（过滤器）预览界面中，点击右上角导出图标，在弹出的菜单中选择“装载”，在弹出的“安全提醒”对话框中选择“继续”，即可成功导入；然后点击左上角的“✗”，回到主界面。

```
https://github.com/Mornwind/GFCN_SwitchServer/raw/master/Thor/gfcn_ios2tx.f4thor
```

2. **填入账号信息（重要！）**：在“过滤器”主界面中，点击闪电按钮上方显示的漏斗图标或过滤器名称，在弹出的“过滤器”列表中，找到刚导入的跨服过滤器，点击右侧的ⓘ并选择“编辑”；在弹出的过滤器详细设置界面中，找到第二项“挂载断点”并点击下方进入；在“编辑断点”界面中，找到第二项“写入账号数据”并点击其下方的“变量绑定”；在“变量绑定”界面中，进入“${open_id}”下的“当前值”，填入已获取到账号数据中的“open_id”值，返回“变量绑定”界面；再进入“${token}”下的“当前值”，填入已获取到账号数据中的“token”值，返回“变量绑定”界面；点击两次左上角“返回”，然后再点击右上角“存储”，即可保存更改并返回“过滤器”列表。
3. **选中跨服过滤器**：在“过滤器”列表中，点击选中跨服过滤器，然后就会自动返回主界面。
4. **安装 MitM 证书**：进入“更多”→“HTTPS 解析设置”，在“HTTPS 证书管理”页面中点击“安装证书到系统”，允许下载配置描述文件，前往系统的“设置”→“通用”→“描述文件与设备管理”中安装 MitM 所需证书。
5. **信任 MitM 证书**：在系统的“设置”→“通用”→“关于本机”→“证书信任设置”中信任该证书；然后回到 Thor 的“HTTPS 证书管理”页面。
6. **启用 HTTPS 解析**：在“HTTPS 证书管理”页面中，打开证书右侧的开关；然后返回首页。
7. **启动 Thor**：在“过滤器”主界面中，点击闪电按钮启动 Thor，然后在清除了游戏后台的情况下进入游戏，即可完成跨服。（如无其他使用需求，成功跨服进入游戏后便可停止 Thor。）

</details>

### ⑶ Shadowrocket
 > 请尽可能将 Shadowrocket 更新至 2.2.10 (1761) 及以上的 TF 或商店版本（至少需高于 2.1.78 (1263) 版本）。目前 2.2.10 版本以下的 Shadowrocket 因太过久远未经测试，可能会在跨服时遇到“配置正确却无法跨服但又一直找不到原因”的情况。

#### 方法一：直接订阅简易配置

<details>
<summary>点击查看：第一部分 获取账号登录信息</summary>

**⚠️注意事项⚠️**：只有**首次跨服**、**账号登录数据失效**两种情况下才需要完整执行一次第一部分的操作。**不需要每次跨服前都去执行一次！**

1. **【iOS】新建本机节点**：在首页，点击右上角”+“，添加一个类型为”HTTP“（或”HTTPS“）、地址为”localhost“（或”127.0.0.1“）、端口为”1080“（或其他在 1-65535 之间的端口）的节点，然后在首页的”服务器节点“中选中该节点。
2. **【iOS】设置路由模式**：将”全局路由“设置为”直连“（或”配置“）。
3. **【iOS】设置远程订阅 URL**：在”配置文件“界面，点击右上角”+“，输入下面的远程订阅 URL，点击下载。

```
https://github.com/Mornwind/GFCN_SwitchServer/raw/master/Shadowrkt/gfcn_ios2tx.conf
```

4. **【iOS】下载并应用简易配置**：在”远程文件“中点击该 URL，选择”使用配置“，等待下载完毕后，即可看到”本地文件“中加载了“gfcn_ios2tx.conf”配置。
5. **【iOS】设置代理共享**：在”设置“界面，点击进入”TUNNEL“部分中的”代理“，再点击进入”代理共享“，打开”启用共享“开关，并记住下方的”IP“及”端口“。
6. **【iOS】启动 Shadowrocket 进行数据抓取**：返回首页，打开 Shadowrocket 的连接开关，即可开始对相同 Wi-Fi 下的 Android 设备进行数据抓取。
7. **【Android】配置安卓设备的 Wi-Fi 代理（不同机型设置方法略有区别）**：**首先保证你的两个设备在同个 Wi-Fi 下**；然后在”系统设置“→”无线网络“中，找到当前连接的 Wi-Fi，点击进入详细设置，找到”代理设置“，将其改为”手动“，并在”服务器“和”端口“中依次填入第 5 步中记下的内容；点击”保存“返回。
8. **【Android】抓取账号登录数据**：在清除了游戏后台的情况下进入游戏，在游戏中完整进行一次 QQ 或微信账号的授权登录并看到自己的玩家等级后，即可退出游戏。

</details>

<details>
<summary>点击查看：第二部分 配置跨服</summary>

**⚠️提醒⚠️**：借助数据持久化，**无需再去手动编辑脚本填入账号数据**。

1. **安装 MitM 证书**：从“本地文件”中找到当前正在使用的配置，点击它，在弹出的列表中选择“编辑配置”，进入“HTTPS 解密”，点击“证书授权”部分的“密码”右侧的ⓘ，在弹出的“证书”窗口中点击“生成新的 CA 证书”，成功生成证书后，再点击“安装根证书”，允许下载配置描述文件，前往系统的“设置”→“通用”→“描述文件与设备管理”中安装该证书。
2. **信任 MitM 证书**：在系统的“设置”→“通用”→“关于本机”→“证书信任设置”中信任该证书；然后返回 Shadowrocket 的“HTTPS 解密”页面。
3. **启用 HTTPS 解密**：打开“HTTPS 解密”的开关，点击右上角的“✓”保存设置；然后返回 Shadowrocket 的首页。
4. **启动 Shadowrocket**：回到首页打开 Shadowrocket 的连接开关（若接续第一部分操作，则保持开关开启不动）；然后在清除了游戏后台的情况下进入游戏，即可实现跨服。（如无其他使用需求，成功跨服进入游戏后便可停止 Shadowrocket。）

</details>

#### 方法二：手动写入当前使用中配置

<details>
<summary>点击查看：第一部分 获取账号登录信息</summary>

**⚠️注意事项⚠️**：只有**首次跨服**、**账号登录数据失效**两种情况下才需要完整执行一次第一部分的操作。**不需要每次跨服前都去执行一次！**

1. **【iOS】进入配置编辑界面**：在”配置文件“界面，从”本地文件“中找到当前正在使用的配置，点击它，在弹出的列表中选择”编辑纯文本“。
2. **【iOS】添加跨服配置**：在弹出的编辑窗口中，将以下配置中 `[Script]` 及 `[MITM]` 下方的代码，在配置文件中分别找到对应位置复制进去，然后点击右上角的”保存“，返回 Shadowrocket 的首页。

```
[Script]
# 少女前线 跨应用宝服
## 第一部分 获取帐号数据
gfcn_ios2tx_GetToken = type=http-response,script-path=https://github.com/Mornwind/GFCN_SwitchServer/raw/master/Shadowrkt/gfcn_ios2tx_GetToken.js,pattern=^http:\/\/gfcn-passport\.(.+?)\.sunborngame\.com\/third\/channelLogin,max-size=1048576,requires-body=true,enable=true
## 第二部分 切换服务器
gfcn_ios2tx_P1 = type=http-request,script-path=https://github.com/Mornwind/GFCN_SwitchServer/raw/master/Shadowrkt/gfcn_ios2tx_P1.js,pattern=^http:\/\/gfcn-transit\.ios\.sunborngame\.com\/index\.php,max-size=1048576,requires-body=true,enable=true
## 第二部分 写入帐号数据
gfcn_ios2tx_P2 = type=http-request,script-path=https://github.com/Mornwind/GFCN_SwitchServer/raw/master/Shadowrkt/gfcn_ios2tx_P2.js,pattern=^http:\/\/gfcn-game\.(.+?)\.sunborngame\.com\/index\.php\/(.+?)\/Index\/getUidEnMicaQueue,max-size=1048576,requires-body=true,enable=true

[MITM]
enable = true
hostname = gfcn-transit.ios.sunborngame.com
```

3. **【iOS】设置代理共享**：在”设置“界面，点击进入”TUNNEL“部分中的”代理“，再点击进入”代理共享“，打开”启用共享“开关，并记住下方的”IP“及”端口“。
4. **【iOS】启动 Shadowrocket 进行数据抓取**：返回首页，打开 Shadowrocket 的连接开关，即可开始对相同 Wi-Fi 下的 Android 设备进行数据抓取。
5. **【Android】配置安卓设备的 Wi-Fi 代理（不同机型设置方法略有区别）**：**首先保证你的两个设备在同个 Wi-Fi 下**；然后在”系统设置“→”无线网络“中，找到当前连接的 Wi-Fi，点击进入详细设置，找到”代理设置“，将其改为”手动“，并在”服务器“和”端口“中依次填入第 3 步中记下的内容；点击”保存“返回。
6. **【Android】抓取账号登录数据**：在清除了游戏后台的情况下进入游戏，在游戏中完整进行一次 QQ 或微信账号的授权登录并看到自己的玩家等级后，即可退出游戏。

</details>

<details>
<summary>点击查看：第二部分 配置跨服</summary>

**⚠️提醒⚠️**：借助数据持久化，**无需再去手动编辑脚本填入账号数据**。

1. **安装 MitM 证书**：从“本地文件”中找到当前正在使用的配置，点击它，在弹出的列表中选择“编辑配置”，进入“HTTPS 解密”，点击“证书授权”部分的“密码”右侧的ⓘ，在弹出的“证书”窗口中点击“生成新的 CA 证书”，成功生成证书后，再点击“安装根证书”，允许下载配置描述文件，前往系统的“设置”→“通用”→“描述文件与设备管理”中安装该证书。
2. **信任 MitM 证书**：在系统的“设置”→“通用”→“关于本机”→“证书信任设置”中信任该证书；然后返回 Shadowrocket 的“HTTPS 解密”页面。
3. **启用 HTTPS 解密**：打开“HTTPS 解密”的开关，点击右上角的“✓”保存设置；然后返回 Shadowrocket 的首页。
4. **启动 Shadowrocket**：回到首页打开 Shadowrocket 的连接开关（若接续第一部分操作，则保持开关开启不动）；然后在清除了游戏后台的情况下进入游戏，即可实现跨服。（如无其他使用需求，成功跨服进入游戏后便可停止 Shadowrocket。）

</details>

### ⑷ Quantumult X

> 由于 **Quantumult X 为外部设备提供服务的 HTTP 代理模块没有数据分析功能，只有纯粹的代理功能**（开发者原话），所以目前无法在 Quantumult X 中直接实现获取账号登录信息。**故暂不推荐此方法。**

<details>
<summary>点击查看：补充说明</summary>

想要获取账号登录信息，请考虑借助以下工具：

- 安卓上的 HttpCanary

- PC 上的 Fiddler 或 Charles

- iOS 上的其他几款网络工具（如本教程中介绍过的几款；另外也包括 Charles）

</details>

### ⑸ Surge 4

<details>
<summary>点击查看：第一部分 获取账号登录信息</summary>

**⚠️注意事项⚠️**：只有**首次跨服**、**账号登录数据失效**两种情况下才需要完整执行一次第一部分的操作。**不需要每次跨服前都去执行一次！**

1. **【iOS】安装并启用跨服配置模块**：在“首页”中找到“模块”卡片（若未找到，则去“更多”→“外观”→“卡片”中将该卡片设为可见），点击“模块”，在弹出的“模块”界面中，找到“安装的模块”部分，点击“安装新模块...”，然后在弹出的“安装模块”对话框中输入下面的 URL 地址，点“好的”下载模块文件。然后在弹出的配置预览窗口中，**检查有无恶意内容并仔细阅读最下方的“警告”**，在确认无误后，点击最下方的“安装”。回到“模块”界面，即可看到跨服配置模块已成功安装，左侧有“✓”表示该模块已启用。

```
https://github.com/Mornwind/GFCN_SwitchServer/raw/master/Surge_4/gfcn_ios2tx.sgmodule
```

2. **【iOS】启用“脚本”功能**：回到“首页”中，将“脚本”卡片的开关打开（若未找到，则去“更多”→“外观”→“卡片”中将该卡片设为可见）。
3. **【iOS】启用“始终开启”功能**：在“更多”→“设置”→“始终开启”中，打开“自动启动 Surge”的开关，即可保持 Surge 4 一直后台开启。
4. **【iOS】启用“Wi-Fi 访问”功能**：在”首页“中，翻到页面最下方，点击进入”更多设置“；在弹出的“高级”界面中，找到”Wi-Fi 访问“部分，打开”允许 Wi-Fi 访问“开关，并记住下方的”当前 Wi-Fi IP“及”HTTP 代理服务端口“。
5. **【iOS】启动 Surge 4 进行数据抓取**：返回“首页”，点击右上角“启动”按钮启动 Surge 4，即可开始对相同 Wi-Fi 下的 Android 设备进行数据抓取。
6. **【Android】配置安卓设备的 Wi-Fi 代理（不同机型设置方法略有区别）**：**首先保证你的两个设备在同个 Wi-Fi 下**；然后在”系统设置“→”无线网络“中，找到当前连接的 Wi-Fi，点击进入详细设置，找到”代理设置“，将其改为”手动“，并在”服务器“和”端口“中依次填入第 4 步中记下的内容；点击”保存“返回。
7. **【Android】抓取账号登录数据**：在清除了游戏后台的情况下进入游戏，在游戏中完整进行一次 QQ 或微信账号的授权登录并看到自己的玩家等级后，即可退出游戏。

</details>

<details>
<summary>点击查看：第二部分 配置跨服</summary>

**⚠️提醒⚠️**：借助数据持久化，**无需再去手动编辑脚本填入账号数据**。

1. **安装 MitM 证书**：在“首页”中找到“MitM”卡片（若未找到，则去“更多”→“外观”→“卡片”中将该卡片设为可见），点击“配置根证书”，在弹出的“HTTPS 解密”窗口中，点击“生成新的 CA 证书”，成功生成证书后，再点击“安装根证书”，允许下载配置描述文件，前往系统的“设置”→“通用”→“描述文件与设备管理”中安装 MitM 所需证书。
2. **信任 MitM 证书**：在系统的“设置”→“通用”→“关于本机”→“证书信任设置”中信任该证书；然后回到 Surge 4 的“首页”。
3. **启动 Surge 4**：回到“首页”，点击“首页”右上角“启动”按钮启动 Surge 4（若接续第一部分操作，则保持启动状态不动）；然后在清除了游戏后台的情况下进入游戏，即可实现跨服。（如无其他使用需求，成功跨服进入游戏后便可停止 Surge 4。）

</details>

### ⑹ Loon

<details>
<summary>点击查看：第一部分 获取账号登录信息</summary>

**⚠️注意事项⚠️**：只有**首次跨服**、**账号登录数据失效**两种情况下才需要完整执行一次第一部分的操作。**不需要每次跨服前都去执行一次！**

1. **【iOS】进入“插件”页面**：点击进入底栏中的“配置”界面，找到“插件”部分，点击进入。
2. **【iOS】添加跨服插件**：在弹出的“插件”界面中，点击最上方的“添加”按钮（图标为加号⨁），进入“添加插件”界面；在“URL”中填入下方的 URL，在“别名”中填入“少女前线 跨安卓官服”，“PROXY”默认为空白不选（或选内置的“DIRECT”），然后点击右上角“保存”；然后返回至“配置”界面。

```
https://github.com/Mornwind/GFCN_SwitchServer/raw/master/Loon/gfcn_ios2tx.plugin
```

3. **【iOS】启用“脚本”功能**：在“配置”界面中，找到“脚本”部分，打开右侧的开关启用功能；然后返回首页“仪表”页。
4. **【iOS】启用“Wi-Fi 访问”功能**：在“仪表”界面中，找到”网络共享“卡片（若未找到，点击功能卡片下方的“快捷方式”，将“网络共享”卡片设置为可见即可），打开”网络共享“功能开关，并记住下方显示的 IP 地址，以及点进卡片后在“代理服务”中显示的”HTTP 代理端口“。
5. **【iOS】启动 Loon 进行数据抓取**：返回“仪表”界面，点击右上角“启动”开关启动 Loon，即可开始对相同 Wi-Fi 下的 Android 设备进行数据抓取。
6. **【Android】配置安卓设备的 Wi-Fi 代理（不同机型设置方法略有区别）**：**首先保证你的两个设备在同个 Wi-Fi 下**；然后在”系统设置“→”无线网络“中，找到当前连接的 Wi-Fi，点击进入详细设置，找到”代理设置“，将其改为”手动“，并在”服务器“和”端口“中依次填入第 4 步中记下的内容；点击”保存“返回。
7. **【Android】抓取账号登录数据**：在清除了游戏后台的情况下进入游戏，在游戏中完整进行一次 QQ 或微信账号的授权登录并看到自己的玩家等级后，即可退出游戏。

</details>

<details>
<summary>点击查看：第二部分 配置跨服</summary>

**⚠️提醒⚠️**：借助数据持久化，**无需再去手动编辑脚本填入账号数据**。

1. **安装 MitM 证书**：在“配置”界面中，找到“MITM”部分，点击下方的“证书管理”，在弹出的“证书管理”界面中点击“生成新的 CA 证书”，成功生成证书后，再点击“安装根证书”，允许下载配置描述文件，前往系统的“设置”→“通用”→“描述文件与设备管理”中安装 MitM 所需证书。
2. **信任 MitM 证书**：在系统的“设置”→“通用”→“关于本机”→“证书信任设置”中信任该证书；然后返回 Loon 的“配置”界面。
3. **启用 HTTPS 解密**：在“配置”界面中，找到刚才的“MITM”部分，打开其右侧的开关启用功能；然后返回至“仪表”界面。
4. **启动 Loon**：回到”仪表“界面，点击右上角的“启动“开关启动 Loon（若接续第一部分操作，则保持启动状态不动）；然后在清除了游戏后台的情况下进入游戏，即可实现跨服。（如无其他使用需求，成功跨服进入游戏后便可停止 Loon。）

</details>

---

[返回前言](/README.md)
